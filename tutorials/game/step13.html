<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Jan 8, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title></title>
    <style type="text/css" media="all">
      @import url("../../css/maven-base.css");
      @import url("../../css/maven-theme.css");
      @import url("../../css/site.css");
    </style>
    <link rel="stylesheet" href="../../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20120108" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                                      <a href="../.././" id="bannerLeft">
                                                <img src="../../images/logo.png" alt="wlandsuite" />
                </a>
                              <a href="https://github.com/kayahr/wlandsuite/" id="bannerRight">
                                        <img src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2012-01-08</span>
                  &nbsp;| <span id="projectVersion">Version: 1.3.1</span>
                      </div>
            <div class="xright">                    <a href="http://wasteland.gamepedia.com/Wasteland:_The_Definitive_Deconstruction" class="externalLink" title="Wasteland Wiki">Wasteland Wiki</a>
            |
                        <a href="http://games.groups.yahoo.com/group/wasteland/" class="externalLink" title="Snake Squeezins">Snake Squeezins</a>
              
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>Wasteland Suite</h5>
                  <ul>
                  <li class="none">
                          <a href="../../index.html" title="About">About</a>
            </li>
                  <li class="none">
                          <a href="../../download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../../install.html" title="Installation">Installation</a>
            </li>
                  <li class="none">
                          <a href="../../problems.html" title="Report problems">Report problems</a>
            </li>
          </ul>
                       <h5>Tutorials</h5>
                  <ul>
                  <li class="none">
                          <a href="../../tutorials/game/index.html" title="Game tutorial">Game tutorial</a>
            </li>
          </ul>
                       <h5>Programs</h5>
                  <ul>
                  <li class="none">
                          <a href="../../decodepic.html" title="decodepic">decodepic</a>
            </li>
                  <li class="none">
                          <a href="../../encodepic.html" title="encodepic">encodepic</a>
            </li>
                  <li class="none">
                          <a href="../../unpackmasks.html" title="unpackmasks">unpackmasks</a>
            </li>
                  <li class="none">
                          <a href="../../packmasks.html" title="packmasks">packmasks</a>
            </li>
                  <li class="none">
                          <a href="../../unpacksprites.html" title="unpacksprites">unpacksprites</a>
            </li>
                  <li class="none">
                          <a href="../../packsprites.html" title="packsprites">packsprites</a>
            </li>
                  <li class="none">
                          <a href="../../unpackcpa.html" title="unpackcpa">unpackcpa</a>
            </li>
                  <li class="none">
                          <a href="../../packcpa.html" title="packcpa">packcpa</a>
            </li>
                  <li class="none">
                          <a href="../../unpackhtds.html" title="unpackhtds">unpackhtds</a>
            </li>
                  <li class="none">
                          <a href="../../packhtds.html" title="packhtds">packhtds</a>
            </li>
                  <li class="none">
                          <a href="../../unpackpics.html" title="unpackpics">unpackpics</a>
            </li>
                  <li class="none">
                          <a href="../../packpics.html" title="packpics">packpics</a>
            </li>
                  <li class="none">
                          <a href="../../unpackcurs.html" title="unpackcurs">unpackcurs</a>
            </li>
                  <li class="none">
                          <a href="../../packcurs.html" title="packcurs">packcurs</a>
            </li>
                  <li class="none">
                          <a href="../../unpackfnt.html" title="unpackfnt">unpackfnt</a>
            </li>
                  <li class="none">
                          <a href="../../packfnt.html" title="packfnt">packfnt</a>
            </li>
                  <li class="none">
                          <a href="../../unpackgame.html" title="unpackgame">unpackgame</a>
            </li>
                  <li class="none">
                          <a href="../../packgame.html" title="packgame">packgame</a>
            </li>
                  <li class="none">
                          <a href="../../fixwloffsets.html" title="fixwloffsets">fixwloffsets</a>
            </li>
                  <li class="none">
                          <a href="../../extractmaps.html" title="extractmaps">extractmaps</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="../../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Game Tutorial Step 13: Adding a store<a name="Game_Tutorial_Step_13:_Adding_a_store"></a></h2><p>With <a class="externalLink" href="http://wasteland.gamepedia.com/Special+Building+Data">action class 6</a> you can create special buildings like a store, a doctor, a library or the ranger center. This example just shows how to create a store but the other special buildings works similiar with the <i>doctor</i>, <i>library</i> and <i>rangerCenter</i> tags. </p><p>Here is the code for our store:</p><div><pre>&lt;actions actionClass=&quot;6&quot;&gt;
  &lt;store id=&quot;0&quot; 
         name=&quot;Kwik-E-Mart&quot;           
         message=&quot;19&quot; 
         itemList=&quot;2&quot;
         buyFactor=&quot;0&quot;
         sellFactor=&quot;1&quot;
         newActionClass=&quot;0xfe&quot; 
         newAction=&quot;0xfe&quot;&gt;
    &lt;itemType&gt;2&lt;/itemType&gt;
    &lt;itemType&gt;0x0e&lt;/itemType&gt;
    &lt;itemType&gt;0x70&lt;/itemType&gt;
  &lt;/store&gt;
&lt;/actions&gt;</pre></div><p>This defines a store with the name <i>Kwik-E-Mart</i> which sells some small weapons and ammunition from item list 2. The values of <i>newActionClass</i> and <i>newAction</i> is <i>0xfe</i> here which means using the <i>previous</i> action class and action as a replacement for the square. The reason for this is made clear when we link this store to a square because we don't do this directly. Instead we use a transition action which references the store in it's <i>newActionClass</i>/<i>newAction</i> pair. This is a common implementation of a special building in Wasteland because this ensures that the player must confirm to enter a special building. The replacement value of 0xfe just makes sure that the square is not linked to the store permanently when the transition action we create now is executed.</p><p>Here comes the new transition action. Add it to the action container for action class 10 (0xa):</p><div><pre>&lt;transition id=&quot;2&quot; 
            confirm=&quot;true&quot;
            relative=&quot;true&quot;
            targetMap=&quot;1&quot; 
            message=&quot;18&quot; 
            newActionClass=&quot;6&quot; 
            newAction=&quot;0&quot; /&gt;    </pre></div><p>Now find a good spot for your store on the map and give the square the action class <i>a</i>, the action <i>02</i> and the tile <i>0a</i>.</p><p>Now add the new strings and you can visit the Kwik-E-Mart:</p><div><pre>&lt;string id=&quot;18&quot;&gt;\rEntering the Kwik-E-Mart\r&lt;/string&gt;
&lt;string id=&quot;19&quot;&gt;\x07Welcome to the Kwik-E-Mart.\r\r&lt;/string&gt;  </pre></div><p>You can download the current state of the map here: <a href="./step13/map01.xml">map01.xml</a>.</p><img src="step13.png" alt="" /><p><a href="./step12.html">Back to step 12</a> | <a href="./index.html">Index page</a> </p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2010-2012
                        <a href="http://www.ailis.de/~k/">Klaus Reimer</a>.
            All Rights Reserved.      
        
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
