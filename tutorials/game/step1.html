<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Jan 8, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title></title>
    <style type="text/css" media="all">
      @import url("../../css/maven-base.css");
      @import url("../../css/maven-theme.css");
      @import url("../../css/site.css");
    </style>
    <link rel="stylesheet" href="../../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20120108" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://www.ailis.de/~k/software/projects/wlandsuite/" id="bannerLeft">
                                                <img src="../../images/logo.png" alt="wlandsuite" />
                </a>
                              <a href="https://github.com/kayahr/wlandsuite/" id="bannerRight">
                                        <img src="https://a248.e.akamai.net/assets.github.com/img/30f550e0d38ceb6ef5b81500c64d970b7fb0f028/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2012-01-08</span>
                  &nbsp;| <span id="projectVersion">Version: 1.3.1</span>
                      </div>
            <div class="xright">                    <a href="http://wasteland.wikispaces.com/" class="externalLink" title="Wasteland Wiki">Wasteland Wiki</a>
            |
                        <a href="http://games.groups.yahoo.com/group/wasteland/" class="externalLink" title="Snake Squeezins">Snake Squeezins</a>
              
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>Wasteland Suite</h5>
                  <ul>
                  <li class="none">
                          <a href="../../index.html" title="About">About</a>
            </li>
                  <li class="none">
                          <a href="../../download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../../install.html" title="Installation">Installation</a>
            </li>
                  <li class="none">
                          <a href="../../problems.html" title="Report problems">Report problems</a>
            </li>
          </ul>
                       <h5>Tutorials</h5>
                  <ul>
                  <li class="none">
                          <a href="../../tutorials/game/index.html" title="Game tutorial">Game tutorial</a>
            </li>
          </ul>
                       <h5>Programs</h5>
                  <ul>
                  <li class="none">
                          <a href="../../decodepic.html" title="decodepic">decodepic</a>
            </li>
                  <li class="none">
                          <a href="../../encodepic.html" title="encodepic">encodepic</a>
            </li>
                  <li class="none">
                          <a href="../../unpackmasks.html" title="unpackmasks">unpackmasks</a>
            </li>
                  <li class="none">
                          <a href="../../packmasks.html" title="packmasks">packmasks</a>
            </li>
                  <li class="none">
                          <a href="../../unpacksprites.html" title="unpacksprites">unpacksprites</a>
            </li>
                  <li class="none">
                          <a href="../../packsprites.html" title="packsprites">packsprites</a>
            </li>
                  <li class="none">
                          <a href="../../unpackcpa.html" title="unpackcpa">unpackcpa</a>
            </li>
                  <li class="none">
                          <a href="../../packcpa.html" title="packcpa">packcpa</a>
            </li>
                  <li class="none">
                          <a href="../../unpackhtds.html" title="unpackhtds">unpackhtds</a>
            </li>
                  <li class="none">
                          <a href="../../packhtds.html" title="packhtds">packhtds</a>
            </li>
                  <li class="none">
                          <a href="../../unpackpics.html" title="unpackpics">unpackpics</a>
            </li>
                  <li class="none">
                          <a href="../../packpics.html" title="packpics">packpics</a>
            </li>
                  <li class="none">
                          <a href="../../unpackcurs.html" title="unpackcurs">unpackcurs</a>
            </li>
                  <li class="none">
                          <a href="../../packcurs.html" title="packcurs">packcurs</a>
            </li>
                  <li class="none">
                          <a href="../../unpackfnt.html" title="unpackfnt">unpackfnt</a>
            </li>
                  <li class="none">
                          <a href="../../packfnt.html" title="packfnt">packfnt</a>
            </li>
                  <li class="none">
                          <a href="../../unpackgame.html" title="unpackgame">unpackgame</a>
            </li>
                  <li class="none">
                          <a href="../../packgame.html" title="packgame">packgame</a>
            </li>
                  <li class="none">
                          <a href="../../fixwloffsets.html" title="fixwloffsets">fixwloffsets</a>
            </li>
                  <li class="none">
                          <a href="../../extractmaps.html" title="extractmaps">extractmaps</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="../../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Game Tutorial Step 1: Create skeleton game files<a name="Game_Tutorial_Step_1:_Create_skeleton_game_files"></a></h2><p>We are going to create our own custom game and therefor we don't need all the original maps of Wasteland. So we need a set of skeleton map files to work with. Because we are only creating a very small demo game we only create a game1 file for Wasteland. For larger games you may also need to create a game2 file but this tutorial will not need it.</p><div class="section"><h3>Unpacking the original game1<a name="Unpacking_the_original_game1"></a></h3><p>First of all we have to unpack the original game1 file. This tutorial assumes you are using Windows (Shame on you), Wasteland is installed in c:\wland and your working directory for creating the new game is c:\work.</p><p>After you have installed the Wasteland Suite by following the <a href="../../install.html">installation instructions</a> you need to execute the following command on the command line to unpack the original game1 file:</p><div><pre>unpackgame c:\work c:\wland\game1 </pre></div><p>Now you have 20 map*.xml files, a savegame.xml and three shopitems*.xml files in your working directory. </p></div><div class="section"><h3>Stripping unneeded stuff<a name="Stripping_unneeded_stuff"></a></h3><p>We will only use map01.xml (a 32x32 map) for demonstration. Open this file in your favourite XML editor now. A normal text editor will also work but then you can't take advantage of the XML schema referenced in the XML files. So you don't get documentation for all the tags and attributes, you get no auto-completion and don't get validation.</p><p>At the top of the file you see the two tags <i>actionClassMap</i> and <i>actionMap</i>. These two tags contain the action class map (Giving each square an <a class="externalLink" href="http://wasteland.wikispaces.com/Map+Tile+Action+Classes">action class</a>) and the action map (Giving each square a specific action of the action class). We want a clean map so you can set all action classes to 0 or for better readability you can also use a single dot instead of the number 0. The action map you can fill with 00 (or two dots for better readability). I recommend doing this for one line and then copying the line 31 times.</p><p>Below the <i>actionMap</i> tag you'll find the <i>info</i> tag. This tag contains some attributes describing some properties of the map. Configure it like this:</p><ul><li>Set the <i>tileset</i> to 1 (A list of the original tilesets of Wasteland can be found in the <a class="externalLink" href="http://wasteland.wikispaces.com/Tiles">Wasteland Wiki</a>).</li><li>Set the <i>backgroundTile</i> attribute to 146 (A desert tile). This tile is drawn as the frame around the map. This frame is visible when you move your party to the edge of the map.</li><li>Set the <i>timeFactor</i> to 256. This means that on each move on the map one minute passes.</li><li>Set the <i>encounterFrequency</i> to 0 because for now we don't want random encounters in the map.</li><li>Set <i>lastMonster</i> and <i>maxEncounters</i> to 0 because we don't want any monsters in the map yet.</li><li>Remove the three <i>unknown</i> attributes. We don't know the purpose of these values and therefor we don't need them in our custom map. If you know what these three values do, then please let me know!</li></ul><p>Below the <i>info</i> tag you'll find the <i>battleStrings</i> tag. Leave this one as it is. In later steps we want to add fights and so we need this tag. The <i>battleStrings</i> tag refers to all the strings used during combat (Like <i>x hits y for z points</i> and so on).</p><p>Now delete everything up to the <i>strings</i> tag.</p><p>We only need the strings which are referenced in the <i>battleStrings</i> tag, so you can delete all strings (except string 0) up to the id referenced in the <i>s0</i> attribute of the <i>battleStrings</i> tag. For map01.xml this is 66. So delete the strings 1-65. String 0 is a special string and is always empty. I recommend you keep this string because you want actions in your map which don't output any message so these actions refer to string 0.</p><p>If you are a perfectionist you may change the ids of the battle strings so they start with 1, but this is not necessary. If you add new strings to the map you can use the ids of the strings you just deleted (1-65) and if this is not enough you can continue adding strings after the battle strings (id 99-255).</p><p>The last tag in the map file is the <i>tileMap</i>. This defines which tile should be drawn on which square. First of all delete the <i>unknown</i> attribute. Again I don't know what this value does. For our map it's not needed, so delete it. And when you know what this value does, please tell me. Replace all the values of the content of the <i>tileMap</i> tag with two dots. Here two dots are not the same as 00. Instead two dots mean using the background tile defined in the <i>info</i> tag. So if you decide later that you want nice green grass instead of desert sand as a background then you just need to change the <i>backgroundTile</i> attribute in the <i>info</i> tag and this also affects the tile map.</p><p>If you are lazy you can download a prepared skeleton file here: <a href="./step1/map01.xml">map01.xml</a>. Copy this file into your working directory and you are done.</p><p>By the way: You may have noticed the attributes <i>mapSize</i>, <i>msqSize</i> and <i>tilemapOffset</i> in the root element of the XML document. <b>Don't change these attributes!</b>. The <a href="../../packgame.html">packgame</a> program needs these values so it knows how to construct the new game file so Wasteland can find the maps in the new game file.</p></div><div class="section"><h3>Modifying the savegame<a name="Modifying_the_savegame"></a></h3><p>The initial savegame of Wasteland starts with the party on the first map somewhere in the lower right corner. For our new map we need the party to be in the upper left corner of map 1. So open the <i>savegame.xml</i> file in your editor and change the attributes <i>x</i> and <i>y</i> in the <i>party</i> tag to <i>0</i> and the <i>map</i> attribute to <i>1</i>.</p></div><div class="section"><h3>Testing the new map<a name="Testing_the_new_map"></a></h3><p>Now we are ready to create our first custom game file. Run the following command to pack the changed files into a new game1 file:</p><div><pre>packgame c:\work c:\wland\game1</pre></div><p>Now start up wasteland and you'll stand in the middle of a desert. (Ok, you are not in the middle, you are in the upper left corner, but who can tell when the map frame looks the same as the map itself...) </p><img src="step1.png" alt="Title" /><p><a href="./index.html">Back to index page</a> | <a href="./step2.html">Move on to step 2</a></p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2010-2012
                        <a href="http://www.ailis.de/~k/">Klaus Reimer</a>.
            All Rights Reserved.      
        
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
