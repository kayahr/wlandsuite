<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Jan 8, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title></title>
    <style type="text/css" media="all">
      @import url("../../css/maven-base.css");
      @import url("../../css/maven-theme.css");
      @import url("../../css/site.css");
    </style>
    <link rel="stylesheet" href="../../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20120108" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                                      <a href="../.././" id="bannerLeft">
                                                <img src="../../images/logo.png" alt="wlandsuite" />
                </a>
                              <a href="https://github.com/kayahr/wlandsuite/" id="bannerRight">
                                        <img src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2012-01-08</span>
                  &nbsp;| <span id="projectVersion">Version: 1.3.1</span>
                      </div>
            <div class="xright">                    <a href="http://wasteland.wikispaces.com/" class="externalLink" title="Wasteland Wiki">Wasteland Wiki</a>
            |
                        <a href="http://games.groups.yahoo.com/group/wasteland/" class="externalLink" title="Snake Squeezins">Snake Squeezins</a>
              
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>Wasteland Suite</h5>
                  <ul>
                  <li class="none">
                          <a href="../../index.html" title="About">About</a>
            </li>
                  <li class="none">
                          <a href="../../download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../../install.html" title="Installation">Installation</a>
            </li>
                  <li class="none">
                          <a href="../../problems.html" title="Report problems">Report problems</a>
            </li>
          </ul>
                       <h5>Tutorials</h5>
                  <ul>
                  <li class="none">
                          <a href="../../tutorials/game/index.html" title="Game tutorial">Game tutorial</a>
            </li>
          </ul>
                       <h5>Programs</h5>
                  <ul>
                  <li class="none">
                          <a href="../../decodepic.html" title="decodepic">decodepic</a>
            </li>
                  <li class="none">
                          <a href="../../encodepic.html" title="encodepic">encodepic</a>
            </li>
                  <li class="none">
                          <a href="../../unpackmasks.html" title="unpackmasks">unpackmasks</a>
            </li>
                  <li class="none">
                          <a href="../../packmasks.html" title="packmasks">packmasks</a>
            </li>
                  <li class="none">
                          <a href="../../unpacksprites.html" title="unpacksprites">unpacksprites</a>
            </li>
                  <li class="none">
                          <a href="../../packsprites.html" title="packsprites">packsprites</a>
            </li>
                  <li class="none">
                          <a href="../../unpackcpa.html" title="unpackcpa">unpackcpa</a>
            </li>
                  <li class="none">
                          <a href="../../packcpa.html" title="packcpa">packcpa</a>
            </li>
                  <li class="none">
                          <a href="../../unpackhtds.html" title="unpackhtds">unpackhtds</a>
            </li>
                  <li class="none">
                          <a href="../../packhtds.html" title="packhtds">packhtds</a>
            </li>
                  <li class="none">
                          <a href="../../unpackpics.html" title="unpackpics">unpackpics</a>
            </li>
                  <li class="none">
                          <a href="../../packpics.html" title="packpics">packpics</a>
            </li>
                  <li class="none">
                          <a href="../../unpackcurs.html" title="unpackcurs">unpackcurs</a>
            </li>
                  <li class="none">
                          <a href="../../packcurs.html" title="packcurs">packcurs</a>
            </li>
                  <li class="none">
                          <a href="../../unpackfnt.html" title="unpackfnt">unpackfnt</a>
            </li>
                  <li class="none">
                          <a href="../../packfnt.html" title="packfnt">packfnt</a>
            </li>
                  <li class="none">
                          <a href="../../unpackgame.html" title="unpackgame">unpackgame</a>
            </li>
                  <li class="none">
                          <a href="../../packgame.html" title="packgame">packgame</a>
            </li>
                  <li class="none">
                          <a href="../../fixwloffsets.html" title="fixwloffsets">fixwloffsets</a>
            </li>
                  <li class="none">
                          <a href="../../extractmaps.html" title="extractmaps">extractmaps</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="../../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Game Tutorial Step 10: Adding random encounters<a name="Game_Tutorial_Step_10:_Adding_random_encounters"></a></h2><p><a class="externalLink" href="http://wasteland.wikispaces.com/Random+Encounter+Data">Action class 15 (f)</a> is a special action class. You don't need to connect this action class to a square because the game will do this randomly (That's why it's called <i>random encounter</i>). In this example we will add two easy to beat monsters which you will encounter from time to time when you travel around the map.</p><p>First of all we need to define the monsters. The <i>monsters</i> section must be in front of the <i>strings</i> section. Here is the code: </p><div><pre>&lt;monsters&gt;
  &lt;monster id=&quot;0&quot; /&gt;
  &lt;monster id=&quot;1&quot; 
           name=&quot;Visa \nman\nmen\n&quot; 
           ac=&quot;1&quot; 
           experience=&quot;15&quot; 
           skill=&quot;10&quot; 
           fixedDamage=&quot;0&quot; 
           randomDamage=&quot;1&quot; 
           maxGroupSize=&quot;2&quot;
           weaponType=&quot;2&quot; 
           monsterType=&quot;3&quot;
           picture=&quot;32&quot; /&gt;
  &lt;monster id=&quot;2&quot;
           name=&quot;Brother Tux&quot; 
           ac=&quot;2&quot; 
           experience=&quot;20&quot; 
           skill=&quot;15&quot; 
           fixedDamage=&quot;0&quot; 
           randomDamage=&quot;2&quot; 
           maxGroupSize=&quot;1&quot;
           weaponType=&quot;2&quot; 
           monsterType=&quot;3&quot;
           picture=&quot;31&quot; /&gt;
&lt;/monsters&gt; </pre></div><p>Please note that the first monster (The monster with id 0) must always be empty. This has the same reason as for the strings. Actions may refer to monster 0 which means <i>no monster</i>. </p><p>When you take a look at the name of the first monster you can see how singular and plural names are built. If you need monster names to be different when the group consists of one member or more members then you must split the name into four parts separated with the special character <i>\n</i>. The first and the last part is used for singular and plural names. The second part is only used for singular and the third part is only used for plural.</p><p>Now you have defined the monsters but there is more to do. Next step is using action class 15 to create temporary space for the state of random encounters. These actions can also be used to provide some more information for an encounter but it's enough if you just know that you should define an action in action class 15 for each random encounter you want to have on the map at the same time. This means when you flee from a battle and you have two actions in action class 15 then you can encounter another fight. But if you flee from this one, too, then you have your freedom until you go back to the the monsters and kill them.</p><p>So here they are, the actions in action class 15:</p><div><pre>&lt;actions actionClass=&quot;0xf&quot;&gt;
  &lt;encounter id=&quot;0&quot; message=&quot;15&quot; newActionClass=&quot;0&quot; newAction=&quot;0&quot; /&gt;
  &lt;encounter id=&quot;1&quot; message=&quot;15&quot; newActionClass=&quot;0&quot; newAction=&quot;0&quot; /&gt;
&lt;/actions&gt;</pre></div><p>They do not much. They just define that string 15 will be displayed when the fight begins. String 15, here it is:</p><div><pre>&lt;string id=&quot;15&quot;&gt;A freak crawls out of his hole. It's better you bring him back...\r&lt;/string&gt;</pre></div><p>But there is more to do. You may remember that we have disabled random encounters in the <i>info</i> tag. Now it's time to re-enable them. To do this first set <i>lastMonster</i> to 2. This defines that the first two monsters are used for random encounters. All other monsters are only used in fixed encounters. You see: Random encounter monsters always must be at the beginning of the monsters table. Set <i>maxEncounters</i> to 2. You should always set this value to the number of random encounter actions you have created in action class 15. Later versions of the Wasteland Suite may set this value automatically when it is confirmed that there is no sense in using a different value here. Set <i>encounterFrequency</i> to 50. This defines that the chances for a random encounter is 1 to 50.</p><p>Now pack the game file, run the game and walk around a bit until you encounter the Visa Man or Brother Tux. </p><p>You can download the current state of the map here: <a href="./step10/map01.xml">map01.xml</a>.</p><img src="step10.png" alt="" /><p><a href="./step9.html">Back to step 9</a> | <a href="./index.html">Index page</a> | <a href="./step11.html">Move on to step 11</a></p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2010-2012
                        <a href="http://www.ailis.de/~k/">Klaus Reimer</a>.
            All Rights Reserved.      
        
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
