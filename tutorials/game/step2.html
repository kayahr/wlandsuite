<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Jan 8, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title></title>
    <style type="text/css" media="all">
      @import url("../../css/maven-base.css");
      @import url("../../css/maven-theme.css");
      @import url("../../css/site.css");
    </style>
    <link rel="stylesheet" href="../../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20120108" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://www.ailis.de/~k/software/projects/wlandsuite/" id="bannerLeft">
                                                <img src="../../images/logo.png" alt="wlandsuite" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2012-01-08</span>
                  &nbsp;| <span id="projectVersion">Version: 1.3.2</span>
                      </div>
            <div class="xright">                    <a href="http://wasteland.wikispaces.com/" class="externalLink" title="Wasteland Wiki">Wasteland Wiki</a>
            |
                        <a href="http://games.groups.yahoo.com/group/wasteland/" class="externalLink" title="Snake Squeezins">Snake Squeezins</a>
              
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>Wasteland Suite</h5>
                  <ul>
                  <li class="none">
                          <a href="../../index.html" title="About">About</a>
            </li>
                  <li class="none">
                          <a href="../../download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../../install.html" title="Installation">Installation</a>
            </li>
                  <li class="none">
                          <a href="../../problems.html" title="Report problems">Report problems</a>
            </li>
          </ul>
                       <h5>Tutorials</h5>
                  <ul>
                  <li class="none">
                          <a href="../../tutorials/game/index.html" title="Game tutorial">Game tutorial</a>
            </li>
          </ul>
                       <h5>Programs</h5>
                  <ul>
                  <li class="none">
                          <a href="../../decodepic.html" title="decodepic">decodepic</a>
            </li>
                  <li class="none">
                          <a href="../../encodepic.html" title="encodepic">encodepic</a>
            </li>
                  <li class="none">
                          <a href="../../unpackmasks.html" title="unpackmasks">unpackmasks</a>
            </li>
                  <li class="none">
                          <a href="../../packmasks.html" title="packmasks">packmasks</a>
            </li>
                  <li class="none">
                          <a href="../../unpacksprites.html" title="unpacksprites">unpacksprites</a>
            </li>
                  <li class="none">
                          <a href="../../packsprites.html" title="packsprites">packsprites</a>
            </li>
                  <li class="none">
                          <a href="../../unpackcpa.html" title="unpackcpa">unpackcpa</a>
            </li>
                  <li class="none">
                          <a href="../../packcpa.html" title="packcpa">packcpa</a>
            </li>
                  <li class="none">
                          <a href="../../unpackhtds.html" title="unpackhtds">unpackhtds</a>
            </li>
                  <li class="none">
                          <a href="../../packhtds.html" title="packhtds">packhtds</a>
            </li>
                  <li class="none">
                          <a href="../../unpackpics.html" title="unpackpics">unpackpics</a>
            </li>
                  <li class="none">
                          <a href="../../packpics.html" title="packpics">packpics</a>
            </li>
                  <li class="none">
                          <a href="../../unpackcurs.html" title="unpackcurs">unpackcurs</a>
            </li>
                  <li class="none">
                          <a href="../../packcurs.html" title="packcurs">packcurs</a>
            </li>
                  <li class="none">
                          <a href="../../unpackfnt.html" title="unpackfnt">unpackfnt</a>
            </li>
                  <li class="none">
                          <a href="../../packfnt.html" title="packfnt">packfnt</a>
            </li>
                  <li class="none">
                          <a href="../../unpackgame.html" title="unpackgame">unpackgame</a>
            </li>
                  <li class="none">
                          <a href="../../packgame.html" title="packgame">packgame</a>
            </li>
                  <li class="none">
                          <a href="../../fixwloffsets.html" title="fixwloffsets">fixwloffsets</a>
            </li>
                  <li class="none">
                          <a href="../../extractmaps.html" title="extractmaps">extractmaps</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="../../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Game Tutorial Step 2: Adding a simple print action<a name="Game_Tutorial_Step_2:_Adding_a_simple_print_action"></a></h2><p>With the <a class="externalLink" href="http://wasteland.wikispaces.com/Interpreting+Action+Class+1">print action</a> you can output one or more messages when the player steps on a specific square. It's also possible to change the action class and the action of the square after the message has been printed. In this step you'll learn how to create a nice apple tree which generate a message when you step on it the first time and generate no more messages on all future visits.</p><div class="section"><h3>Add the action container<a name="Add_the_action_container"></a></h3><p>Because this is the first print action in the map you first have to create the action container for all print actions. You do this by inserting the following code after the <i>battleStrings</i> tag:</p><div><pre>&lt;actions actionClass=&quot;1&quot;&gt;

&lt;/actions&gt;</pre></div><p>The <i>actionClass</i> attribute is needed to tell the game which type of actions are in this container. Action class 1 is for the print actions. This value of this attribute also defines the character which must be used in the <i>actionClassMap</i> tag to connect a square to this action class. In the <i>actionClassMap</i> you use a hexadecimal value (0-9, a-f) to refer to the action classes.</p></div><div class="section"><h3>Add the new string<a name="Add_the_new_string"></a></h3><p>Go to the strings section and add a string with id 1:</p><div><pre>&lt;string id=&quot;1&quot;&gt;\rA nice apple tree. You climb up and eat all the apples.\r&lt;/string&gt;</pre></div><p>By the way: The \r is a line-break. It's used often in messages so they are separated properly from other printed messages.</p></div><div class="section"><h3>Add the print action<a name="Add_the_print_action"></a></h3><p>Now go to the action container you created and add the print action:</p><div><pre>&lt;actions actionClass=&quot;1&quot;&gt;
  &lt;print id=&quot;0&quot; newActionClass=&quot;0&quot; newAction=&quot;0&quot;&gt;
    &lt;message&gt;1&lt;/message&gt;
  &lt;/print&gt;
&lt;/actions&gt; </pre></div><p>What is this code doing? It defines a print action with the id 0 which just outputs the message string with id 1. You can add more <i>message</i> tags if you want to output multiple strings but in this example one message is sufficient. And after the message has been printed the square is connected to action class 0 and action 0 which just means: Do nothing. If you don't use the <i>newActionClass</i> and <i>newAction</i> attribute then the square stays untouched and outputs the text message every time you visit it. </p></div><div class="section"><h3>Connect the square to the print action<a name="Connect_the_square_to_the_print_action"></a></h3><p>Now you need to connect a square with this new action and you also want to draw a apple tree on the map. First of all you must decide which square you want to connect to this action. You have to change the values at exact the same position in the <i>actionClassMap</i>, <i>actionMap</i> and <i>tileMap</i>. In the <i>actionClassMap</i> set the square to <i>1</i> (For the action class 1). In the <i>actionClass</i> you can leave the current value because the two dots you have there is the same as 00. But I recommend setting the square to 00 so you can see that there is something special on this square. In the <i>tileMap</i> set the desired square to the value 42. You may wonder how the hell we know which number is the apple tree. It works like this: In the <a class="externalLink" href="http://wasteland.wikispaces.com/Tiles">Wasteland Wiki</a> is a list of the original tilesets at the bottom of the page. We have selected tileset 1 for our demo map and in this tileset you can see the apple tree at position 56. But because the tile numbers 0-9 are occupied by the sprites from the file ic0_9.wlf you have to add 10 to the tile number. So the apple tree has the number 66. Convert this to hex (42) and you have the value which must be used in the <i>tileMap</i>.</p><p>Ok, that's it. Pack a new game file and start up Wasteland and you'll see the apple tree. and when you step on it you'll see the message. Step on it again and you'll see no more messages. What a great game, isn't it?</p><p>You can download the current state of the map here: <a href="./step2/map01.xml">map01.xml</a>.</p><img src="step2.png" alt="" /><p><a href="./step1.html">Back to step 1</a> | <a href="./index.html">Index page</a> | <a href="./step3.html">Move on to step 3</a></p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2010-2012
                        <a href="http://www.ailis.de/~k/">Klaus Reimer</a>.
            All Rights Reserved.      
        
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
